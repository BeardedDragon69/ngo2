(()=>{var e={};e.id=301,e.ids=[301],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2094:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>k,routeModule:()=>h,serverHooks:()=>N,workAsyncStorage:()=>R,workUnitAsyncStorage:()=>E});var s={};r.r(s),r.d(s,{DELETE:()=>y,GET:()=>x,POST:()=>v,PUT:()=>j});var i=r(6559),n=r(8088),a=r(7719),o=r(2190),u=r(9021),c=r(3873),p=r.n(c),d=r(9748);let l=p().join(process.cwd(),"data","events.json"),g=p().join(process.cwd(),"public","events");async function m(){try{let e=await u.promises.readFile(l,"utf8");return JSON.parse(e)}catch(e){return[]}}async function f(e){await u.promises.mkdir(p().dirname(l),{recursive:!0}),await u.promises.writeFile(l,JSON.stringify(e,null,2))}async function w(e,t){let r=await e.arrayBuffer(),s=Buffer.from(r);await u.promises.mkdir(g,{recursive:!0});let i=e.name.split(".").pop(),n=`${t}.${i}`,a=p().join(g,n);return await (0,d.writeFile)(a,s),`/events/${n}`}async function x(){let e=await m();return o.NextResponse.json(e)}async function v(e){try{let t=await e.formData(),r=Date.now().toString(),s=t.get("image");if(!s)return o.NextResponse.json({error:"Image is required"},{status:400});let i=await w(s,r),n={id:r,title:t.get("title"),date:t.get("date"),description:t.get("description"),location:t.get("location"),image:i,badge:t.get("badge")},a=await m();return a.push(n),await f(a),o.NextResponse.json(n)}catch(e){return console.error("Error creating event:",e),o.NextResponse.json({error:"Failed to create event"},{status:500})}}async function j(e){try{let t=await e.formData(),r=t.get("id"),s=await m(),i=s.find(e=>e.id===r);if(!i)return o.NextResponse.json({error:"Event not found"},{status:404});let n=i.image,a=t.get("image");if(a&&a.size>0){if(i.image){let e=p().join(process.cwd(),"public",i.image);try{await u.promises.unlink(e)}catch(e){console.error("Error deleting old image:",e)}}n=await w(a,r)}let c={id:r,title:t.get("title"),date:t.get("date"),description:t.get("description"),location:t.get("location"),image:n,badge:t.get("badge")},d=s.findIndex(e=>e.id===r);return s[d]=c,await f(s),o.NextResponse.json(c)}catch(e){return console.error("Error updating event:",e),o.NextResponse.json({error:"Failed to update event"},{status:500})}}async function y(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return o.NextResponse.json({error:"Event ID is required"},{status:400});let s=await m(),i=s.find(e=>e.id===r);if(!i)return o.NextResponse.json({error:"Event not found"},{status:404});if(i.image){let e=p().join(process.cwd(),"public",i.image);try{await u.promises.unlink(e)}catch(e){console.error("Error deleting image:",e)}}let n=s.filter(e=>e.id!==r);return await f(n),o.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting event:",e),o.NextResponse.json({error:"Failed to delete event"},{status:500})}}let h=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/events/route",pathname:"/api/events",filename:"route",bundlePath:"app/api/events/route"},resolvedPagePath:"/home/anuj/Documents/ngo2/src/app/api/events/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:R,workUnitAsyncStorage:E,serverHooks:N}=h;function k(){return(0,a.patchFetch)({workAsyncStorage:R,workUnitAsyncStorage:E})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9021:e=>{"use strict";e.exports=require("fs")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9748:e=>{"use strict";e.exports=require("fs/promises")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580],()=>r(2094));module.exports=s})();